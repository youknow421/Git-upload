Product Requirements Document (PRD)









BuyForce MVP




Platforms: Web + Mobile(Android + IOS)
Market (MVP): Israel
Owner: Refael
Date: November 2025
Status: Final Draft

    1. EXECUTIVE SUMMARY
BuyForce is a new digital commerce platform that leverages collective purchasing power to unlock wholesale-level pricing for consumers.
The platform focuses on high-value products (1,000+₪), enabling users to join group-buying campaigns with a symbolic 1₪  pre-authorization and charging the full discounted price only if the group reaches the minimum quantity required by suppliers.
If the group fails to reach the target - the pre-authorization is immediately refunded.
The platform launches with a Web App + Native iOS & Android apps, a complete Admin Console, and full Tranzilla payment integration.

The MVP includes:
    • Dynamic homepage (Near Goal, Market-Breaking Deals, New Arrivals)
    • Category browsing (electronics, travel, home, furniture, etc.)
    • Wishlist
    • My Groups
    • Search overlay
    • Fully designed product cards
    • Admin portal with manual product & supplier operations
    • Automated group lifecycle (open>locked >charged/refunded)
The system is fully scalable for future expansion into AI-driven supplier negotiation, international multi-currency commerce, and logistics partnerships.

    2. PRODUCT VISION
BuyForce aims to become the leading global platform for collective buying, empowering consumers with bargaining power traditionally reserved for wholesalers and large retailers.
Our philosophy:
    • Consumers win through lower prices.
    • Suppliers win through bulk guaranteed demand.
    • BuyForce wins through a scalable revenue model built on take-rates.
    3. STRATEGIC GOALS
        a. Business Goals
            i. Validate the group-buying model in the Israeli market.
            ii. Prove unit economics and conversion potential in high-value categories.
            iii. Create the technological foundation for global scale.
            iv. Achieve trust, transparency, and ease-of-use that reduce consumer friction.
        b. Product Goals
            i. Build intuitive, mobile-first user experiences.
            ii. Enable consumers to discover deals effortlessly.
            iii. Provide clear group progress visibility.
            iv. Build stable, secure payment flow supporting pre-auth logic.
        c. Technical Goals
            i. Implement a modular, API-driven architecture (frontend-agnostic).
            ii. Ensure payment reliability with idempotency everywhere.
            iii. Design for future agentic modules (AI Supplier Negotiation).
            iv. Build admin tools to reduce operational load.
    4. SCOPE (MVP)
INCLUDED:
    • Web app (Next.js)
    • Native app (React Native)
    • Tranzilla payments
    • Categories + category feeds
    • Wishlist
    • My Groups
    • Search overlay
    • Notifications (email + push)
    • Admin Console
    • Homepage dynamic sections
    • Group lifecycle automation
    • Full UX/UI system



EXCLUDED (Future Phases):
    • Multi-currency
    • International logistics
    • Agentic systems
        ◦ identify market opportunities
        ◦ negotiate directly with suppliers
        ◦ create and optimize group-buy campaigns automatically
        ◦ track pricing trends
        ◦ Automated pricing
        ◦ manage logistics partners
        ◦ expand into global cross-border commerce
    • Supplier onboarding portal
    • Tiered discount ladders
    • Social sharing incentives
    • Loyalty systems
    • Community group-creation tools

    5. USER PERSONAS
Persona 1: The Value Seeker (Primary)
    • Age: 18-55
    • Income: Low-Medium
    • Tech level: Moderate
    • Behavior: Always looks for discounts and deals.
    • Categories: Electronics, Home appliances. 
Motivations
    • Save money
    • Find the best deal online
    • Trust that the price is truly the lowest
Pain Points
    • Feels “ripped off” by regular retail prices
    • Doesn’t trust fake discounts
    • Doesn’t know if a deal is really good


Buying Triggers
    • High discount percentage
    • “Near goal” groups
    • Social proof
Product Implications
    • Highlight discounts
    • Show progress clearly
    • Include comparison anchors (regular price vs. group price)
Persona 2: The Premium Buyer
    • Age: 25-45
    • Income: Medium-High
    • Behavior: Purchases premium electronics, lifestyle and tech gadgets.
    • Categories: Phones, headphones, laptops.
Motivations
    • Wants premium products at smart prices
    • Enjoys being early to tech trends
Pain Points
    • Premium items are expensive
    • Hard to tell when a discount is actually worthwhile.
Buying Triggers
    • High-end products with real savings
    • Clear delivery expectations
    • Fast group completion
Product Implications
    • Emphasize brand credibility
    • Fast-moving categories
    • Clean, premium visuals



Persona 3: The Returning Power User
    • Age: 20-45
    • Behavior: Visits the app multiple times weekly
    • Categories: Mixed
Motivations
    • Always checking group progress
    • Eager to catch new deals early
    • Wants transparency
Pain Points
    • Doesn’t want to miss opportunities
    • Wants to track multiple groups easily
Buying Triggers
    • Push notifications
    • “Ending soon” banners
    • “95% completion” prompts
Product Implications
    • Strong “My Groups” section
    • Reliable push notifications
    • Real-time progress updates
Persona 4: The Social Influencer / Trend Amplifier
    • Age: 17-35
    • Income: Medium
    • Behavior: Shares deals with friends/followers
    • Categories: Fashion, gadgets, seasonal items
Motivations
    • Wants to share value with followers
    • Loves trending items
    • Finds joy in being “the first”

Pain Points
    • Finds it hard to verify legit deals
    • Doesn’t want to share unreliable products
Buying Triggers
    • Viral items
    • High-discount trending products
    • Clear social sharing tools
Product Implications
    • Add shareable product links
    • Highlight trends
    • Add reward incentives / gamification (future roadmap)


















    6. USER FLOWS
Flow A: Join a Group Journey
Primary Path
    1. User enters homepage.
    2. Browses dynamic sections (Near Goal, Market-Breaking, New).
    3. Selects a product card.
    4. Opens product page.
    5. Reviews price, discount, progress bar, deadline.
    6. Taps “Join for 1₪”.
    7. System opens payment modal (Tranzilla).
    8. Pre-authorization of 1₪  is attempted.
    9. On success > user is added to group.
    10. System displays confirmation screen.
    11. Group progress updates (progress bar increases).
    12. User receives push + email confirmation.
    13. User sees “Joined ✔” badge on product card.
    14. If group reaches target > automatic charge of full amount.
    15. User receives receipt & success notification.
Alternative / Edge Cases
    • Payment decline > Show error + retry option (Pop-Up “complete your payment”) 
    • Group becomes full during payment > Pre-auth fails > Notify + offer waitlist (future feature)
    • Group expired during payment > Refund flow triggers automatically
    • User tries joining twice > Show message: “You are already in”















Flow B: Discover Through Categories
Primary Path
    1. User taps “Categories” in bottom navigation.
    2. Category grid appears (Electronics, Furniture, Travel, etc.).
    3. User selects a category.
    4. Category feed loads with:
        ◦ Sorting (Closest to Goal, Highest Discount, Newest)
        ◦ Filters (Price ranges, brand, type - future optional)
    5. User scrolls through product cards.
    6. Taps a card to view details.
    7. Joins group or taps ♥ to save.
Alternative Paths
    • User changes sort order > feed refreshes
    • User filters by price > results narrow
    • Empty category (rare) > Show placeholder + cross-category suggestions
    • Slow connection > skeleton loading states
























Flow C: My Groups Tracking
Primary Path
    1. User taps “My Groups”.
    2. List of joined groups appears with tabs or segmentation:
        ◦ Active
        ◦ Closing Soon
        ◦ Charged
        ◦ Refunded
        ◦ Failed
    3. User taps a specific group.
    4. Group detail view shows:
        ◦ Progress bar
        ◦ Time remaining
        ◦ Joined count
        ◦ Price
        ◦ Charge status
        ◦ Supplier info
    5. User gets real-time updates as group progresses.
    6. After completion > charge or refund is reflected.
Alternatives
    • User wants to cancel > Allowed only if group is not locked (Finished)
    • Payment method expired > System prompts update (“Please Update Your Payment Method”)
    • Multiple groups > Pagination or infinite scroll














Flow D: Wishlist
Primary Path
    1. User taps ♥ on product card.
    2. Snack-bar: “Saved to Wishlist”.
    3. Icon turns solid.
    4. User opens Profile > Wishlist.
    5. Wishlist grid appears.
    6. User taps product to open details.
    7. User may join group from Wishlist.
Edge Cases
    • Wishlist empty > Show illustration + CTA “Browse deals” / placeholder.
    • User unsaves > Item disappears immediately (no reload).
    • Product removed by admin >  Show “The Group Is No longer available”.
Flow E: Registration & Login
Primary Path: Registration
    1. User opens app for first time.
    2. Sees onboarding screens (3 slides).
    3. Presses “Get Started”.
    4. Registration options appear:
        ◦ Email & Password
        ◦ Google
        ◦ Apple ID (iOS)
    5. User completes registration.
    6. Email/SMS verification (optional MVP).
    7. User redirected to homepage.
Login Flow
    1. User taps “Login”.
    2. Enters email + password or OAuth.
    3. Successful login > redirected to homepage.
Edge Cases
    • Forgotten password > Reset by Email/SMS
    • Wrong password > Error + retry (limited 5 attempts)
    • Duplicate account > “This Email is already exists”

Flow F: Search Flow
    1. User taps search icon in top bar.
    2. Fullscreen search overlay opens.
    3. Search bar autofocuses.
    4. User types query.
    5. System shows:
        ◦ Trending searches
        ◦ Recent searches
        ◦ Autocomplete suggestions
    6. User selects a suggestion or presses enter.
    7. Search results page loads with filters.
    8. User opens a product > joins or saves.
Edge Cases
    • No results  > “No deals found, Try Again?.”
    • Slow input > debounce search
Flow G: Group Completion
Success Scenario
    1. Group reaches required number of users.
    2. System transitions group > LOCKED.
    3. All join actions disabled.
    4. Payment service attempts full charge per user.
    5. Successful charges > status CHARGED.
    6. System sends:
        ◦ Email receipt
        ◦ Push notification
    7. Supplier fulfillment process begins (manual for MVP).
Failure Scenarios
    • Charge failure for some users > retry mechanism
    • Supplier cancels > group refunded (legal action)

Flow H: Group Failure / Refund
    1. Deadline reached AND group below target.
    2. System marks group as FAILED.
    3. Automated refund workflow triggers for all users.
    4. Push notification: “Group didn’t complete - your 1₪  has been refunded.”
    5. Refund confirmation email sent.
    6. Group marked as closed and archived.

Flow I: Group Completion
Notification Triggers
    • Pre-auth successful
    • Group hit 70%
    • Group hit 95%
    • 12 hours left
    • Group success  > charged
    • Group failed > refunded
User Flow
    1. User receives push or email.
    2. Taps notification.
    3. Redirects directly to relevant group or product.
    4. Continues action (join, track, etc.).





Flow J: Onboarding
    1. User installs/open app/website for first time.
    2. Onboarding carousel (3-4 screens):
        ◦ “Save big by buying together”
        ◦ “Only 1₪  to join a group”
        ◦ “Pay full only if we hit the goal”
    3. User clicks “Continue”.
Outcome: User understands unique BuyForce model.
Flow K: Category > Sorting > Filtering
    1. User enters a category.
    2. Taps “Sort”:
        ◦ Closest to Goal
        ◦ Highest Discount
        ◦ Newest
    3. Taps “Filters” (future):
        ◦ Price ranges
        ◦ Brands
        ◦ Sub-categories
    4. Applies filters > results update instantly.
Flow L: Join Cancellation
    1. User opens My Groups > selects Active group.
    2. If group status is OPEN (not Locked):
        ◦ User taps “Cancel Participation”.
        ◦ Confirmation modal appears.
    3. On confirm > pre-auth refunded.
    4. Group progress updated.
Edge Case
    • If group is already LOCKED  > “Cancellation no longer available.”
Flow M: Payment Error Handling
Pre-auth Fails
    1. “Card declined” message.
    2. User can try again or update payment method.
Charge Fails (after success)
    1. System retries up to X times.
    2. If still fails > user notified to update card.
    3. Group remains in partial state until resolved / open opportunity to join for new bidders.
Flow N: Admin Product & Campaign Management
    1. Admin logs into Admin Console.
    2. Adds new product (images, price, supplier info).
    3. Sets group parameters (MOQ, group price, deadlines).
    4. Publishes campaign.
    5. Monitors real-time metrics (joins, progress).
    6. Manually triggers charge/refund if needed.
    7. Edits product details.
    8. Deactivates or archives campaigns.








    7. INFORMATION ARCHITECTURE
Below is the complete hierarchical map of the BuyForce system across Web + Native apps, including content hierarchy, navigational structure, page grouping, and feature relationships.
1. High-Level Architecture Overview
BuyForce is structured into five major user-facing domains:
    1. Public Shopping Experience (Home, Categories, Product Pages)
    2. User Personal Space (Profile, Wishlist, My Groups, Payments)
    3. Product Interaction (Join flow, Search, Notifications)
    4. Group Lifecycle Infrastructure (Group pages, tracking, payment states)
    5. Admin Console (content management, suppliers, pricing, operations)
Each domain contains multiple subdomains and functional clusters.
2. Global Navigation Model
Top Bar (Global Header)
    • Left: BuyForce Logo
    • Right: Search Icon (opens full-screen overlay)
Displayed on Web & Mobile.
Bottom Navigation (Primary Mobile Nav)
    • Home 
    • Categories
    • My Groups 
    • Notifications 
    • Profile 
This is the primary navigation method for mobile, and the secondary for desktop.




   3.Full Application Sitemap (System-Wide Hierarchy)
        3.1 Home Domain
            3.1.1 Home Page
    • Dynamic sections
        ◦ Near Goal Groups
        ◦ Market-Breaking Deals
        ◦ New Arrivals
        ◦ Trending Categories
    • Global product cards
    • Quick-access category shortcuts
    • Scrollable feed (infinite scroll)
            3.1.2 Homepage API Links
        ◦ /groups/near-goal
        ◦ /groups/top-discounts
        ◦ /groups/new
        ◦ /categories/trending
        3.2 Categories Domain
            3.2.1 Categories Overview Page
        ◦ Grid of categories
        ◦ Each category tile includes icon + label
            3.2.2 Category Feed Page
        ◦ Sorted & filtered product card grid
        ◦ Components:
            ▪ Sorting menu
            ▪ Filter drawer (future)
            ▪ Breadcrumbs (web)
            ▪ Infinite scroll
            3.2.3 Category API Links
            ▪ /categories
            ▪ /products?category=x&sort=y
            ▪ /groups?category=x











        3.3 Product & Group Domain
            3.3.1 Product Page
Includes:
                • Image carousel
                • Product description
                • Prices (regular, group)
                • Progress bar
                • Discount percentage
                • Supplier details
                • Countdown timer
                • CTA: Join for 1₪
                • Wishlist icon
                • Product specifications
            3.3.2 Group Details Page
Displays:
    • Joined members count
    • Group target
    • Group status
    • Full price breakdown
    • Payments history (post-MVP)
    • Group timeline
    • Expected fulfillment info
            3.3.3 Product/Group Infrastructure APIs
                • /product/:id
                • /group/:id
                • /group/join
                • /group/cancel
        3.4 Search Domain
            3.4.1 3.4.1 Search Overlay
    • Trending searches
    • Recent searches
    • Live autocomplete
            3.4.2 3.4.2 Search Results Page
    • Result grid
    • Sorting options
    • Filters (future)
            3.4.3 Search APIs
    • /search/suggestions
    • /search/results?q=



        3.5 My Groups Domain
            3.5.1 My Groups Page
    • Segmented by status:
        ◦ Active
        ◦ Closing Soon
        ◦ Success (Locking/Charging)
        ◦ Charged
        ◦ Refunded
        ◦ Failed
            3.5.2 Group Detail Page
    • Real-time progress
    • Transaction history
    • Group countdown
    • Charge/refund state
            3.5.3 APIs
    • /user/groups
    • /user/group/:id
        3.6 Wishlist Domain
            3.6.1 Wishlist Page
    • Grid of saved products
    • Linked to product pages
    • Persistent by user
    • Remove from wishlist
            3.6.2 Wishlist APIs
    • /wishlist
    • /wishlist/add
    • /wishlist/remove/:id
        3.7 Profile Domain
            3.7.1 Profile Home
    • Name, email
    • Payment methods
    • Wishlist
    • Language
    • Support / Help
    • Logout
            3.7.2 Payment Methods Page
    • Add card
    • Delete card
    • Default payment method
    • Error handling


            3.7.3 User Settings
    • Notifications toggle
    • Communication preferences
    • Push & email settings
            3.7.4 Profile APIs
    • /user/profile
    • /user/payment-methods
        3.8 Authentication Domain
            3.8.1 Login
    • Email/password
    • Google
    • Apple
            3.8.2 Registration
    • User details
    • Password rules
    • Verify email (optional)
            3.8.3 Forgot Password
            3.8.4 APIs
    • /auth/login
    • /auth/register
    • /auth/forgot-password
        3.9 Notifications Domain
            3.9.1 Notification Center
    • Success messages
    • Group updates
    • Refund alerts
    • Promo deals
            3.9.2 Notification Settings
    • Turn on/off categories
    • Push preferences
            3.9.3 Notifications APIs
    • /notifications
    • /notifications/settings
        3.10 Payment Domain
            3.10.1 Pre-auth Flow
    • Pre-auth 1₪
    • Tranzilla ref
    • Status: PREAUTH_HELD
            3.10.2 Charge Flow
    • Full charge when group success
    • Transaction tracking
    • Retry logic
            3.10.3 Refund Flow
    • Group failure > auto refund
    • Email confirmation
    • Status updates
            3.10.4 APIs
    • /payment/preauth
    • /payment/charge
    • /payment/refund
        3.11 Group Lifecycle System Domain
            3.11.1 Group States
    • DRAFT
    • OPEN
    • REACHED_TARGET
    • LOCKED
    • CHARGING
    • CHARGED
    • FULFILLED
    • FAILED
    • REFUNDED
            3.11.2 Automated Engines
    • Charging engine
    • Refund engine
    • Lock engine
    • Deadline scheduler
            3.11.3 APIs
    • /groups/state/:id
    • /groups/metrics
















        3.12 Admin Console Domain
            3.12.1 Product Management
    • Add new product
    • Upload images
    • Edit price
    • Assign categories
            3.12.2 Group Management
    • Create campaign
    • Set target members
    • Edit deadlines
    • Force-close group
    • Charge/refund manually (override)
            3.12.3 Supplier Management
    • Add supplier
    • Pricing tables
    • Logistics info
            3.12.4 User Management
    • View users
    • Block/unblock
    • View transactions
            3.12.5 Analytics Dashboard
    • GMV
    • Revenue
    • Group completion rate
    • Conversion funnels
    • Category performance
        3.13 Future Agentic Architecture Domain
            3.13.1 Agent Modules
    • Trend Detection Agent
    • Supplier Negotiation Agent
    • Automated Pricing Agent
    • Product Discovery Agent
    • Campaign Builder Agent
    • Risk Assessment Agent
    • Logistics Agent
            3.13.2 Agent Interfaces
    • Supplier communication
    • Dynamic pricing
    • Automated SKU onboarding
    • Real-time multi-market scanning

    8. SYSTEM ARCHITECTURE
This section describes the end-to-end system architecture for BuyForce, including all core components, their interactions, data flows, integrations, and non-functional considerations (scalability, security, observability).

        8.1 Architecture Goals & Principles
            8.1.1 Modular & Extensible
    • Clear domain boundaries (Users, Catalog, Groups, Payments, Notifications, Admin).
    • Easy to add future modules (Agentic AI, Supplier Portal, Multi-currency).
            8.1.2 API-Driven & Frontend-Agnostic
    • Web and Mobile consume the same REST APIs.
    • Possible to add future clients (Partner apps, Supplier portal) without re-architecting.
            8.1.3 Resilient, Observable, and Scalable
    • Stateless app servers.
    • Central DB with clear isolation between read/write operations.
    • Caching for read-heavy endpoints (homepage, search, trending).
            8.1.4 Security & Compliance First
    • All sensitive data (payments) handled by Tranzilla.
    • JWT + Firebase Auth.
    • HTTPS everywhere.
    • PCI-DSS compliant model (SAQ-A style).
        8.2 High-Level Logical Architecture
At a high level, the system consists of:
    • Client Layer
        ◦ Web App (Next.js)
        ◦ Mobile App (React Native: iOS, Android)
        ◦ Admin Console (Web, React Admin)

    • Backend Layer (Nest.js)
        ◦ API Gateway / HTTP Layer
        ◦ Domain Modules:
            ▪ Auth & Users
            ▪ Catalog (Products & Categories)
            ▪ Groups & Campaigns
            ▪ Payments (Tranzilla Integration)
            ▪ Notifications (Push/Email)
            ▪ Wishlist & My Groups
            ▪ Admin & Reporting
            ▪ Search
    • Data & Storage Layer
        ◦ PostgreSQL (primary DB)
        ◦ Redis (cache, queues)
        ◦ Object Storage (images, assets) - e.g. S3 bucket
    • External Services
        ◦ Tranzilla (payments)
        ◦ Firebase Auth (identity)
        ◦ Firebase Cloud Messaging (push)
        ◦ SendGrid (email)
        ◦ CDN (Cloudflare) for static assets and caching
        8.3 Frontend Architecture
            8.3.1 Web App (Next.js)
    • Framework: Next.js (React) with SSR/SSG where beneficial.
    • Styling: Tailwind CSS.
    • Routing: File-based routing + dynamic routes for product pages and categories.
    • State Management: React Query or SWR for data fetching + caching, minimal global state.
    • Features:
        ◦ Fully responsive (mobile, tablet, desktop).
        ◦ Uses REST APIs for all dynamic data.
        ◦ Stores auth token in HTTP-only cookies for Web (for security).

            8.3.2 Mobile Apps (React Native)
    • Framework: React Native (shared code for iOS/Android).
    • Navigation: React Navigation with bottom tab navigator.
    • State Management & Data: React Query / RTK Query.
    • Auth: Uses Firebase Auth SDK; obtains ID token and exchanges for backend JWT if needed.
    • Push Notifications: Integrated with FCM (Firebase Cloud Messaging).
            8.3.3 Shared Design System
    • Shared design tokens: colors, typography, spacing.
    • Shared UI patterns: Product Card, Buttons, Progress Bars, Modals, Chips, Badges.
    • Ensures consistent look-and-feel across Web and Mobile.
        8.4 Backend Architecture (Nest.js)
The backend is structured as a modular monolith (MVP), with clear Nest.js modules that map to business domains.
            8.4.1 Modules
    1. AuthModule
    • Handles login/registration via Firebase Auth or email/password.
    • Issues JWT for server-side authorization.
    • Manages sessions and security checks.
    2. UserModule
    • User profile (name, email, preferences).
    • Payment methods (token references from Tranzilla).
    • Notification preferences.
    3. CatalogModule
    • Manages products, categories, images.
    • Endpoints: list products, filter by category, sort by discount, etc.
    • Interfaces with AdminModule for product creation and updates.
    4. GroupModule
        ◦ Core group-buying logic:
            ▪ Group life-cycle (OPEN, LOCKED, CHARGED, FAILED, REFUNDED).
            ▪ Joined count, target members, deadlines.
        ◦ Calculates progress, status, and time remaining.
        ◦ The “source of truth” for group state.
    5. PaymentModule
        ◦ Integrates with Tranzilla.
        ◦ Responsibilities:
            ▪ Pre-auth 1₪  on join.
            ▪ Full charge when group succeeds.
            ▪ Refund when group fails or user cancels (if allowed).
        ◦ Implements idempotency and retry logic.
        ◦ Logs all payment attempts and statuses.
    6. WishlistModule
        ◦ CRUD for wishlist items.
        ◦ Exposes /wishlist endpoints.
    7. MyGroupsModule
        ◦ Aggregates user’s joined groups and their statuses.
        ◦ Calls GroupModule and PaymentModule for data.
    8. NotificationModule
        ◦ Manages notifications pipeline:
            ▪ Emails via SendGrid.
            ▪ Push via Firebase Cloud Messaging.
        ◦ Sends:
            ▪ Join confirmations.
            ▪ 70% / 95% progress milestones.
            ▪ 12 hours remaining reminders.
            ▪ Success (charge) / Failure (refund) alerts.






    9. AdminModule
        ◦ Provides Admin APIs for:
            ▪ Managing products, categories.
            ▪ Managing groups & campaigns.
            ▪ Triggering manual charge/refund.
            ▪ Viewing reports and metrics (basic analytics).
    10. SearchModule
        ◦ Centralizes search queries.
        ◦ Connects to DB and/or external full-text search (future, e.g., Elasticsearch).
        ◦ Provides suggestions & results.

        8.5 Data & Storage Layer
            8.5.1 PostgreSQL (Primary DB)
        ◦ Single logical database for MVP, with schemas roughly corresponding to modules:
        ◦ users, products, categories, groups, transactions, wishlist, notifications.
        ◦ DB responsibilities:
        ◦ ACID guarantees for joins, thresholds, and payments.
        ◦ Row-level locking for group joins (prevent race conditions on joined_count).
        ◦ Time-based queries for deadlines and active campaigns.
            8.5.2 Redis (Cache & Queues)
Redis is used for:
    1. Caching
        ◦ Homepage queries (Near Goal, Market-Breaking, New Arrivals).
        ◦ Trending categories.
        ◦ Search suggestions.
        ◦ TTL based caches (30-120 seconds).
    2. Queues / Background Jobs
        ◦ Payment tasks (Pre-auth follow-ups, charge, refund).
        ◦ Group state transition checks (deadline, target reached).
        ◦ Notification dispatch.
Typical job queue library: BullMQ (using Redis).
            8.5.3 Object Storage
        ◦ Product images & assets stored in S3-compatible storage (e.g., AWS S3).
        ◦ Access via CDN (Cloudflare) for performance.


        8.6 External Integrations
            8.6.1 Tranzilla (Payments)
    • Pre-auth for 1₪  when user joins.
    • Charge for full group amount upon success.
    • Refund upon failure, expiration, or cancellation (where applicable).
Integration Pattern:
        ◦ Backend calls Tranzilla via HTTPS (server-to-server).
        ◦ Responses stored with provider_ref (transaction ID).
        ◦ Idempotency keys used on BuyForce side (user_id:group_id:operation).
        ◦ Webhooks (if provided) used for asynchronous status updates (optional for MVP).
            8.6.2 Firebase Auth
        ◦ Used for:
        ◦ Authentication (email/password, Google, Apple ID).
        ◦ Token verification on backend (ID token > server JWT mapping).
            8.6.3 Firebase Cloud Messaging (FCM)
        ◦ Triggered from NotificationModule for:
        ◦ Join confirmation.
        ◦ Group updates.
        ◦ Success/refund events.
            8.6.4 SendGrid
        ◦ Email templates:
        ◦ Welcome.
        ◦ Group joined.
        ◦ Group success & receipt.
        ◦ Group failed & refund.
        ◦ Password reset (if not using Firebase’s built-in).
            8.6.5 CDN (Cloudflare)
        ◦ Delivers static assets (images, JS bundles, CSS).
        ◦ Provides edge caching for better performance worldwide.






        8.7 Core Data Flows
            8.7.1 Join Group & Pre-Auth Flow (Sequence)
    1. Client > Backend: POST /group/join with product_id.
    2. Backend:
        ◦ Authenticates user.
        ◦ Validates product & group status (OPEN, not expired).
        ◦ Begins DB transaction.
        ◦ Locks group row.
        ◦ Verifies user has not already joined.
        ◦ Increments joined_count.
        ◦ Creates transaction row with status INITIATED.
        ◦ Calls Tranzilla pre-auth (₪1).
    3. Tranzilla returns success:
        ◦ Backend marks transaction PREAUTH_HELD.
        ◦ Commits DB transaction.
    4. Backend sends response: join success.
    5. NotificationModule sends confirmation (push/email).
    6. Group progress cache invalidated & refreshed.
            8.7.2 Group Success & Charge Flow
    1. GroupModule detects joined_count >= target_members:
        ◦ Either:
            ▪ In real-time on join.
            ▪ Or via periodic job checking thresholds.
    2. Group status transitions:
        ◦ OPEN > REACHED_TARGET > LOCKED.
    3. PaymentModule:
        ◦ Fetches all PREAUTH_HELD transactions for that group.
        ◦ Creates charge jobs in queue (one per user).
        ◦ For each:
            ▪ Calls Tranzilla to charge full group amount.
            ▪ Updates status to CHARGED or FAILED.
    4. On successful majority:
        ◦ Group status CHARGED.
        ◦ Notifications triggered.
    5. On high failure rate (edge case):
        ◦ Either:
            ▪ Retry charges.
            ▪ Or revert group to FAILED and refund all (business rule).






            8.7.3 Group Failure & Refund Flow
    1. Scheduler job checks groups at/after deadline:
        ◦ If joined_count < target_members: mark FAILED.
    2. For FAILED groups:
        ◦ PaymentModule fetches all PREAUTH_HELD transactions.
        ◦ Issues refund calls to Tranzilla.
        ◦ Updates transactions to REFUNDED.
    3. NotificationModule:
        ◦ Push/email: refund processed and group failed.
        8.8 Security Architecture
    1. Protocol Security
        ◦ All endpoints served via HTTPS only.
        ◦ HSTS enabled on domain.
    2. Authentication & Authorization
        ◦ Authentication handled by Firebase Auth (ID tokens).
        ◦ Backend issues JWT or uses Firebase ID tokens directly with Nest.js guards.
        ◦ Role-based access control (RBAC) for Admin.
    3. Data Protection
        ◦ No card data stored on BuyForce servers.
        ◦ Only payment tokens / references saved.
        ◦ Secrets stored in secure config (AWS Parameter Store / Secrets Manager).
    4. Access Control
        ◦ Strict mode: only necessary ports open.
        ◦ Admin console behind additional security (VPN, IP whitelist or admin SSO).
    5. Audit Logging
        ◦ Admin actions logged for:
            ▪ price changes
            ▪ manual refunds
            ▪ manual group closure
        ◦ Logs stored in central logging system (e.g., CloudWatch, ELK).











        8.9 Scalability & Resilience
    1. Stateless App Servers
        ◦ Multiple instances behind a load balancer.
        ◦ Horizontal scaling based on CPU/memory or request metrics.
    2. Database
        ◦ Vertical scaling initially; read replicas or partitioning later.
        ◦ Strict indexes for performance (status, product_id, category).
    3. Caching
        ◦ Redis caching for high-traffic endpoints (homepage, suggestions).
        ◦ Short TTLs to balance freshness.
    4. Queues
        ◦ Payment and notification jobs handled asynchronously.
        ◦ Retries with exponential backoff.
    5. Failure Handling
        ◦ Graceful fallbacks: if homepage dynamic content fails, show fallback deals.
        ◦ Circuit breakers for external services (Tranzilla, SendGrid).
        8.10 Environments & CI/CD
Environments
        ◦ Local dev
        ◦ Staging (full integration with Tranzilla sandbox, Firebase test, etc.)
        ◦ Production
CI/CD
        ◦ On merge:
        ◦ Run tests (unit, integration).
        ◦ Build and deploy to staging automatically.
        ◦ Manual approval > production deployment.
        ◦ Mobile:
        ◦ CI builds for TestFlight (iOS) and Internal Track (Android).
        8.11 Observability (Logging, Metrics, Alerts)
        ◦ Logging
        ◦ Structured JSON logs with trace IDs.
        ◦ Separate channels: app logs, access logs, payment logs.
        ◦ Metrics
        ◦ Request rates, error rates, latencies.
        ◦ Group creation/completion counts.
        ◦ Payment success/failure rates.
        ◦ Alerting
        ◦ 5xx error spike alerts.
        ◦ Payment failure rate above threshold.
        ◦ Queue lag above threshold.


    9. DATABASE SCHEMA
Tech assumption: PostgreSQL

We’ll organize tables by domains:
    1. Users & Auth
    2. Catalog (Products & Categories)
    3. Groups & Participation
    4. Payments & Transactions
    5. Wishlist & User Activity
    6. Notifications & Events
    7. Admin & Audit
    8. Analytics / Trends (for future Agentic)
    8 
    9 
        9.1 Users & Auth
    9 
        9.1 
            9.1.1 users
Purpose: Store core user identity and profile info.
Columns:
        ◦ id UUID PK — primary key
        ◦ email VARCHAR(255), UNIQUE, NOT NULL
        ◦ email_verified BOOLEAN DEFAULT false
        ◦ password_hash VARCHAR(255), NULL (optional if using only OAuth)
        ◦ auth_provider VARCHAR(50), NOT NULL ('email' | 'google' | 'apple')
        ◦ provider_user_id VARCHAR(255), NULL (Firebase UID or provider ID)
        ◦ full_name VARCHAR(255), NULL
        ◦ phone VARCHAR(50), NULL
        ◦ locale VARCHAR(10) DEFAULT ‘en’
        ◦ currency VARCHAR(10) DEFAULT ‘ILS’
        ◦ created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        ◦ updated_at TIMESTAMP WITH TIME ZONE
        ◦ deleted_at TIMESTAMP WITH TIME ZONE, NULL

Indexes:
        ◦ UNIQUE (email)
        ◦ INDEX idx_users_provider_user ON users(provider_user_id) (for OAuth)
            9.1.2 user_settings
Purpose: Per-user preferences.
Columns:
        ◦ user_id UUID PK, FK -> users(id)
        ◦ push_enabled BOOLEAN DEFAULT true
        ◦ email_enabled BOOLEAN DEFAULT true
        ◦ language VARCHAR(10) DEFAULT ‘en’
        ◦ notification_level VARCHAR(50) DEFAULT ‘all’`
        ◦ created_at, updated_at
        9.2 Catalog (Products & Categories)
        9.2 
            9.2.1 categories
Purpose: Categorize products for browsing, filtering, analytics.
Columns:
        ◦ id SERIAL PK
        ◦ name VARCHAR(100), UNIQUE, NOT NULL (e.g., ‘Electronics’)
        ◦ slug VARCHAR(100), UNIQUE, NOT NULL (e.g., ‘electronics’)
        ◦ icon_url TEXT, NULL
        ◦ sort_order INT DEFAULT 0
        ◦ created_at, updated_at
Indexes:
        ◦ UNIQUE (name)
        ◦ UNIQUE (slug)
            9.2.2 products
Purpose: Store product-level metadata and default pricing.
Columns:
        ◦ id UUID PK
        ◦ name VARCHAR(255), NOT NULL
        ◦ slug VARCHAR(255), UNIQUE, NOT NULL (for SEO URLs)
        ◦ category_id INT FK -> categories(id)
        ◦ description TEXT
        ◦ price_regular NUMERIC(12,2) NOT NULL (ILS)
        ◦ price_group NUMERIC(12,2) NOT NULL (ILS)
        ◦ currency VARCHAR(10) DEFAULT ‘ILS’
        ◦ is_active BOOLEAN DEFAULT true
        ◦ min_members INT NOT NULL (minimum participants for group price to be valid)
        ◦ max_members INT NULL (optional cap)
        ◦ supplier_id UUID FK -> suppliers.id (future)
        ◦ created_at, updated_at, deleted_at
Indexes:
        ◦ idx_products_category ON products(category_id)
        ◦ idx_products_active ON products(is_active)
        ◦ (price_regular, price_group) useful for discount queries.








            9.2.3 product_images
Purpose: Store multiple images per product.
Columns:
        ◦ id SERIAL PK
        ◦ product_id UUID FK -> products(id)
        ◦ image_url TEXT NOT NULL
        ◦ sort_order INT DEFAULT 0
        ◦ created_at
Indexes:
        ◦ idx_product_images_product_id ON product_images(product_id)
            9.2.4 product_specs
Purpose: Key/value specs per product (for extended details).
Columns:
        ◦ id SERIAL PK
        ◦ product_id UUID FK -> products(id)
        ◦ spec_key VARCHAR(255) (e.g., ‘Screen Size’)
        ◦ spec_value VARCHAR(255)
        ◦ created_at
        9.3 Groups & Participation
        9.3 
            9.3.1 groups
Purpose: Represents an actual active group-buy campaign for a product.
Columns:
        ◦ id UUID PK
        ◦ product_id UUID FK -> products(id)
        ◦ status VARCHAR(50) NOT NULL
            ▪ ENUM-like: 'DRAFT' | 'OPEN' | 'REACHED_TARGET' | 'LOCKED' | 'CHARGING' | 'CHARGED' | 'FAILED' | 'REFUNDED'
        ◦ joined_count INT DEFAULT 0 NOT NULL
        ◦ target_members INT NOT NULL
        ◦ max_members INT NULL
        ◦ deadline TIMESTAMP WITH TIME ZONE NOT NULL
        ◦ reached_target_at TIMESTAMP WITH TIME ZONE NULL
        ◦ locked_at TIMESTAMP WITH TIME ZONE NULL
        ◦ charged_at TIMESTAMP WITH TIME ZONE NULL
        ◦ failed_at TIMESTAMP WITH TIME ZONE NULL
        ◦ created_at, updated_at
Indexes:
        ◦ idx_groups_product ON groups(product_id)
        ◦ idx_groups_status ON groups(status)
        ◦ Partial index: idx_groups_open_deadline ON groups(status, deadline) WHERE status = 'OPEN'


            9.3.2 group_memberships
Purpose: Link between users and groups (who joined which group).
Columns:
        ◦ id UUID PK
        ◦ group_id UUID FK -> groups(id)
        ◦ user_id UUID FK -> users(id)
        ◦ status VARCHAR(50) NOT NULL
            ▪ 'PENDING_PREAUTH' | 'PREAUTH_HELD' | 'CHARGED' | 'REFUNDED' | 'CANCELLED' | 'FAILED'
        ◦ joined_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        ◦ cancelled_at TIMESTAMP WITH TIME ZONE NULL
        ◦ charged_at TIMESTAMP WITH TIME ZONE NULL
        ◦ refunded_at TIMESTAMP WITH TIME ZONE NULL
        ◦ transaction_id UUID FK -> transactions(id), NULL
        ◦ amount_group_price NUMERIC(12,2) NOT NULL
Constraints:
        ◦ UNIQUE(group_id, user_id)  — same user cannot join twice.
Indexes:
        ◦ idx_group_memberships_group ON group_memberships(group_id)
        ◦ idx_group_memberships_user ON group_memberships(user_id)
        ◦ idx_group_memberships_status ON group_memberships(status)






















        9.4 Payments & Transactions
            9.4.1 transactions
Purpose: Capture any payment-related action (preauth/charge/refund) per user/group.
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK -> users(id)
        ◦ group_id UUID FK -> groups(id)
        ◦ amount NUMERIC(12,2) NOT NULL
        ◦ currency VARCHAR(10) DEFAULT ‘ILS’
        ◦ type VARCHAR(50) NOT NULL
            ▪ 'PREAUTH' | 'CHARGE' | 'REFUND'
        ◦ status VARCHAR(50) NOT NULL
            ▪ 'INITIATED' | 'SUCCESS' | 'FAILED'
        ◦ provider VARCHAR(50) DEFAULT ‘Tranzilla’
        ◦ provider_ref VARCHAR(255) NULL (external txn ID)
        ◦ idempotency_key VARCHAR(255) NOT NULL
        ◦ error_code VARCHAR(100) NULL
        ◦ error_message TEXT NULL
        ◦ created_at, updated_at
Constraints:
        ◦ UNIQUE(idempotency_key) — prevents double charging.
Indexes:
        ◦ idx_tx_user ON transactions(user_id)
        ◦ idx_tx_group ON transactions(group_id)
        ◦ idx_tx_status ON transactions(status)
            9.4.2 user_payment_methods (optional for MVP)
Purpose: Store reference to payment tokens (never card numbers).
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK
        ◦ provider VARCHAR(50) ('Tranzilla')
        ◦ token_ref VARCHAR(255) (tokenized card reference)
        ◦ last4 VARCHAR(4)
        ◦ brand VARCHAR(30) (e.g., VISA)
        ◦ is_default BOOLEAN DEFAULT false
        ◦ created_at, updated_at





        9.5 Wishlist & User Activity
            9.5.1 wishlist
Purpose: Store saved products per user.
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK -> users(id)
        ◦ product_id UUID FK -> products(id)
        ◦ created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
Constraints:
        ◦ UNIQUE(user_id, product_id)
Indexes:
        ◦ idx_wishlist_user ON wishlist(user_id)
        ◦ idx_wishlist_product ON wishlist(product_id)
            9.5.2 search_history
Purpose: Track user search queries for personalization and analytics.
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK -> users(id)
        ◦ keyword VARCHAR(255)
        ◦ created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
Indexes:
        ◦ idx_search_user ON search_history(user_id, created_at)
        ◦ idx_search_keyword ON search_history(keyword)




















        9.6 Notifications & Events
            9.6.1 notifications
Purpose: Store notifications to be sent or already sent to the user.
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK -> users(id)
        ◦ type VARCHAR(50)
            ▪ 'GROUP_JOINED' | 'GROUP_70' | 'GROUP_95' | 'GROUP_SUCCESS' | 'GROUP_FAILED' | 'PAYMENT_FAILED' | 'PROMO' | ...
        ◦ title VARCHAR(255)
        ◦ body TEXT
        ◦ payload JSONB (e.g., { "group_id": "...", "product_id": "..." })
        ◦ channel VARCHAR(50) ('push' | 'email' | 'in_app')
        ◦ status VARCHAR(50) ('PENDING' | 'SENT' | 'FAILED')
        ◦ error_message TEXT NULL
        ◦ created_at
        ◦ sent_at TIMESTAMP WITH TIME ZONE NULL
Indexes:
        ◦ idx_notifications_user ON notifications(user_id)
        ◦ idx_notifications_status ON notifications(status)
        9.7 Admin & Audit
            9.7.1 admins
Purpose: Admin accounts for console.
Columns:
        ◦ id UUID PK
        ◦ user_id UUID FK -> users(id) (if using same user table)
        ◦ role VARCHAR(50) ('super_admin' | 'ops' | 'support')
        ◦ created_at
            9.7.2 audit_logs
Purpose: Track sensitive admin actions.
Columns:
        ◦ id UUID PK
        ◦ admin_id UUID FK -> admins(id)
        ◦ action VARCHAR(255) (e.g., ‘GROUP_FORCE_CLOSE’, ‘MANUAL_REFUND’)
        ◦ target_type VARCHAR(50) ('product' | 'group' | 'user' | 'transaction')
        ◦ target_id UUID
        ◦ details JSONB (before/after)
        ◦ created_at
Indexes:
        ◦ idx_audit_target ON audit_logs(target_type, target_id)

        9.8 Analytics & Trends (Agentic-Future Friendly)
            9.8.1 homepage_metrics
Purpose: Precomputed weekly stats per category.
Columns:
        ◦ id SERIAL PK
        ◦ category_id INT FK -> categories(id)
        ◦ week_start DATE
        ◦ joins_count INT
        ◦ gmv NUMERIC(14,2)
        ◦ created_at
Indexes:
        ◦ idx_homepage_metrics_category_week ON homepage_metrics(category_id, week_start)
            9.8.2 product_performance
Purpose: Store aggregated performance signals per product for Agentic use.
Columns:
        ◦ product_id UUID PK, FK -> products(id)
        ◦ views_7d INT
        ◦ joins_7d INT
        ◦ wishlist_adds_7d INT
        ◦ conversion_rate NUMERIC(5,2)
        ◦ last_aggregated_at TIMESTAMP WITH TIME ZONE

        9.9 ERD (Textual Relationships Summary)
        ◦ users
            ▪ 1 : N -> group_memberships
            ▪ 1 : N -> transactions
            ▪ 1 : N -> wishlist
            ▪ 1 : N -> notifications
        ◦ categories
            ▪ 1 : N -> products
        ◦ products
            ▪ 1 : N -> product_images
            ▪ 1 : N -> product_specs
            ▪ 1 : N -> groups
            ▪ 1 : N -> wishlist
        ◦ groups
            ▪ 1 : N -> group_memberships
            ▪ 1 : N -> transactions
        ◦ group_memberships
            ▪ N : 1 -> transactions (one main transaction, preauth -> charge -> refund chain)

    10. API SPECIFICATION (FULL)
This section defines the public and internal REST APIs for the BuyForce platform.
All endpoints are assumed to be under a common base URL, e.g:
BASE_URL = https://api.buyforce.co/v1
    10 
        10.1 General Conventions
        ◦ Protocol: HTTPS only
        ◦ Format: JSON for request and response bodies
        ◦ Auth:
            ▪ Public/read endpoints: no auth unless specified
            ▪ Private endpoints: Bearer JWT in Authorization header
            ▪ Admin endpoints: Bearer JWT + role=admin (or similar RBAC)
        ◦ Pagination:
            ▪ Query parameters: page (1-based), limit (default: 20, max: 100)
            ▪ Response: { items: [...], page, limit, total }
        ◦ Timestamps: ISO 8601 with timezone, e.g. 2025-11-18T12:34:56Z
        ◦ Error Format:
{
  "code": "STRING_ERROR_CODE",
  "message": "Readable description",
  "details": { "field": "optional extra data" }
}
        ◦ Common error codes:
            ▪ UNAUTHORIZED, FORBIDDEN
            ▪ NOT_FOUND
            ▪ VALIDATION_ERROR
            ▪ RATE_LIMITED
            ▪ INTERNAL_ERROR
















        10.2 Auth & Session APIs
            10.2.1 POST /auth/register
        ◦ Description: Register a new user via email & password.
        ◦ Auth: None
        ◦ Request:
{
  "email": "user@example.com",
  "password": "StrongPass123!",
  "full_name": "John Doe"
}

        ◦ Response 201:
{
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "full_name": "John Doe"
  },
  "token": "jwt-access-token"
}
        ◦ Errors:
            ▪ VALIDATION_ERROR
            ▪ CONFLICT_EMAIL_EXISTS
            10.2.2 POST /auth/login
        ◦ Description: Log in with email & password
        ◦ Request:
{
  "email": "user@example.com",
  "password": "StrongPass123!"
}
        ◦ Response 200:
{
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "full_name": "John Doe"
  },
  "token": "jwt-access-token"
}
        ◦ Errors:
            ▪ UNAUTHORIZED_INVALID_CREDENTIALS
            ▪ USER_DISABLED
            10.2.3 POST /auth/social
        ◦ Description: Authenticate via Google / Apple
        ◦ Request:
{
  "provider": "google",
  "id_token": "google-or-apple-id-token"
}
        ◦ Response 200: same as /auth/login.
            10.2.4 POST /auth/forgot-password
        ◦ Description: Request password reset email
        ◦ Request:
{
  "email": "user@example.com"
}
        ◦ Response 204: No content
        10.3 User Profile & Settings APIs
            10.3.1 GET /user/me
        ◦ Description: Fetch current user profile.
        ◦ Auth: Required
        ◦ Response 200:
{
  "id": "uuid",
  "email": "user@example.com",
  "full_name": "John Doe",
  "locale": "en",
  "currency": "ILS",
  "created_at": "2025-11-18T12:34:56Z"
}
            10.3.2 PATCH /user/me
        ◦ Description: Update profile fields (name, locale, etc.)
        ◦ Auth: Required
        ◦ Request (example):
{
  "full_name": "Johnathan Doe",
  "locale": "he"
}
        ◦ Response 200: Updated user object






            10.3.3 GET /user/settings
•	Description: Get notification & preference settings.
•	Response 200:
{
  "push_enabled": true,
  "email_enabled": true,
  "language": "en",
  "notification_level": "all"
}
            10.3.4 PATCH /user/settings
•	Description: Update notification preferences.
•	Request:
{
  "push_enabled": false,
  "email_enabled": true
}
        10.4 Catalog & Category APIs
            10.4.1 GET /categories
•	Description: List all active categories.
•	Auth: Public
•	Response 200:
{
  "items": [
    { "id": 1, "name": "Electronics", "slug": "electronics", "icon_url": "https://..." },
    { "id": 2, "name": "Furniture", "slug": "furniture", "icon_url": "https://..." }
  ]
}















            10.4.2 GET /products
    • Description: List products (optionally filtered and sorted).
    • Query Params:
        ◦ category (slug) - optional
        ◦ sort - discount | newest | price_asc | price_desc
        ◦ page, limit
    • Response 200:
{
  "items": [
    {
      "id": "uuid-product",
      "name": "Sony 65'' 4K TV",
      "slug": "sony-65-4k-tv",
      "category": "electronics",
      "price_regular": 5500,
      "price_group": 4200,
      "discount_pct": 0.236,
      "is_active": true,
      "image_url": "https://..."
    }
  ],
  "page": 1,
  "limit": 20,
  "total": 127
}



















            10.4.3 GET /product/:id
    • Description: Get full details of a single product + its active group (if any).
    • Response 200:
{
  "id": "uuid-product",
  "name": "Sony 65'' 4K TV",
  "slug": "sony-65-4k-tv",
  "category": "electronics",
  "description": "Ultra HD 4K TV with HDR...",
  "price_regular": 5500,
  "price_group": 4200,
  "discount_pct": 0.236,
  "currency": "ILS",
  "images": ["https://...", "https://..."],
  "specs": [
    { "key": "Size", "value": "65\"" },
    { "key": "Resolution", "value": "4K" }
  ],
  "active_group": {
    "id": "uuid-group",
    "joined_count": 46,
    "target_members": 50,
    "progress_pct": 0.92,
    "deadline": "2025-11-21T18:00:00Z",
    "status": "OPEN"
  }
}
    • Errors:
        ◦ PRODUCT_NOT_FOUND















        10.5 Homepage Dynamic Sections APIs
            10.5.1 GET /groups/near-goal
    • Description: Return group campaigns where joined_count / target_members >= 0.7
    • Response 200:
{
  "items": [
    {
      "group_id": "uuid-group",
      "product_id": "uuid-product",
      "name": "Sony 65'' 4K TV",
      "image_url": "https://...",
      "price_regular": 5500,
      "price_group": 4200,
      "discount_pct": 0.236,
      "progress_pct": 0.92,
      "deadline": "2025-11-21T18:00:00Z"
    }
  ]
}
            10.5.2 GET /groups/top-discounts
    • Description: Top campaigns by highest discount percentage
            10.5.3 GET /groups/new
    • Description: Recently created groups (e.g., last 7 days)
            10.5.4 GET /categories/trending
    • Description: Categories with the highest join counts recently
    • Response 200:
{
  "items": [
    { "category": "electronics", "joins": 1250 },
    { "category": "travel", "joins": 870 }
  ]
}










        10.6 Group Join & Participation APIs
            10.6.1 POST /group/join
    • Description: Join a group-buy campaign with 1₪  pre-auth
    • Auth: Required
    • Request:
{
  "product_id": "uuid-product"
}
    • Server logic (summary):
        ◦ Determine the active group for this product (or create one, depending on business rules).
        ◦ Check group status (must be OPEN, not expired).
        ◦ Check user hasn’t already joined.
        ◦ Do Tranzilla pre-auth for 1₪.
        ◦ On success, create group_membership + transaction.
    • Response 200:
{
  "group_id": "uuid-group",
  "membership_id": "uuid-membership",
  "status": "PREAUTH_HELD",
  "joined_at": "2025-11-18T13:00:00Z"
}
    • Error Codes:
        ◦ GROUP_CLOSED_OR_EXPIRED
        ◦ ALREADY_JOINED
        ◦ PAYMENT_PREAUTH_FAILED
            10.6.2 POST /group/cancel
    • Description: Cancel participation in a group (only if not locked)
    • Auth: Required
    • Request:
{
  "group_id": "uuid-group"
}
    • Response 200:
{
  "status": "CANCELLED"
}
    • Errors:
        ◦ GROUP_ALREADY_LOCKED
        ◦ NOT_IN_GROUP



            10.6.3 GET /group/:id
    • Description: Get full group details
    • Response 200:
{
  "id": "uuid-group",
  "product_id": "uuid-product",
  "status": "OPEN",
  "joined_count": 46,
  "target_members": 50,
  "progress_pct": 0.92,
  "deadline": "2025-11-21T18:00:00Z",
  "created_at": "2025-11-15T12:00:00Z"
}

        10.7 My Groups APIs
            10.7.1 GET /user/groups
    • Description: Return all groups the user has joined, categorized by status
    • Auth: Required
    • Response 200:
{
  "items": [
    {
      "group_id": "uuid-group",
      "product_id": "uuid-product",
      "product_name": "Sony 65'' 4K TV",
      "image_url": "https://...",
      "status": "OPEN",
      "joined_at": "2025-11-16T10:00:00Z",
      "progress_pct": 0.82,
      "deadline": "2025-11-21T18:00:00Z"
    }
  ]
}
    • Optional query params:
        ◦ status (filter by OPEN, CHARGED, REFUNDED, etc.)








        10.8 Wishlist APIs
            10.8.1 GET /wishlist
    • Description: Get current user’s wishlist
    • Auth: Required
    • Response 200:
{
  "items": [
    {
      "product_id": "uuid-product",
      "name": "Dyson V15 Vacuum",
      "image_url": "https://...",
      "price_regular": 2800,
      "price_group": 1800,
      "discount_pct": 0.357,
      "created_at": "2025-11-18T10:30:00Z"
    }
  ]
}

            10.8.2 POST /wishlist/add
    • Description: Add a product to wishlist
    • Request:
{
  "product_id": "uuid-product"
}
    • Response 201:
{
  "product_id": "uuid-product",
  "created_at": "2025-11-18T10:30:00Z"
}
    • Errors:
        ◦ ALREADY_IN_WISHLIST
        ◦ PRODUCT_NOT_FOUND

            10.8.3 DELETE /wishlist/remove/:product_id
    • Description: Remove product from wishlist
    • Response 204: No content






        10.9 Search APIs
            10.9.1 GET /search/suggestions
    • Description: Return trending and recent search suggestions
    • Auth: Optional
    • Response 200:
{
  "trending": ["65\" TV", "iPhone 15", "Gaming laptop"],
  "recent": ["Dyson", "Vacation", "MacBook"]
}
            10.9.2 GET /search/results
    • Description: Search across products/groups
    • Query Params:
        ◦ q - search string
        ◦ page, limit
    • Response 200:
{
  "items": [
    {
      "product_id": "uuid-product",
      "name": "Dyson V15 Vacuum",
      "image_url": "https://...",
      "price_regular": 2800,
      "price_group": 1800,
      "discount_pct": 0.357,
      "has_active_group": true
    }
  ],
  "page": 1,
  "limit": 20,
  "total": 3
}












        10.10 Notifications APIs
            10.10.1 GET /notifications
    • Description: List in-app notifications for the current user
    • Response 200:
{
  "items": [
    {
      "id": "uuid-notification",
      "type": "GROUP_70",
      "title": "Your TV group is 70% full!",
      "body": "Only a few more people needed.",
      "payload": { "group_id": "uuid-group" },
      "channel": "in_app",
      "status": "SENT",
      "created_at": "2025-11-18T12:00:00Z"
    }
  ]
}
            10.10.2 PATCH /notifications/:id/read
    • Description: Mark notification as read (optional)
    • Response 200:
{
  "id": "uuid-notification",
  "status": "READ"
}
        10.11 Payments APIs (Internal / System Use)
// These endpoints are typically internal or restricted to background workers / Admin.
            10.11.1 POST /payments/preauth (internal)
    • Description: Called by Group Join flow to trigger Tranzilla pre-auth
    • Request:
{
  "user_id": "uuid-user",
  "group_id": "uuid-group",
  "amount": 1.00,
  "currency": "ILS",
  "idempotency_key": "userId:groupId:PREAUTH"
}
    • Response 200:
{
  "transaction_id": "uuid-transaction",
  "status": "SUCCESS",
  "provider_ref": "tranzilla-ref-id"
}
            10.11.2 POST /payments/charge-group (internal)
    • Description: Trigger charging all users in a LOCKED group
    • Request:
{
  "group_id": "uuid-group"
}
    • Response 202:
{
  "group_id": "uuid-group",
  "status": "CHARGING_STARTED"
}
            10.11.3 POST /payments/refund-group (internal)
    • Description: Trigger refund for all pre-auths in FAILED group
        10.12 Admin APIs (High-Level)
// All require role=admin and are behind Admin Console.
            10.12.1 POST /admin/products
    • Description: Create new product
    • Request:
{
  "name": "Sony 65'' 4K TV",
  "category_id": 1,
  "price_regular": 5500,
  "price_group": 4200,
  "description": "Long description...",
  "images": ["https://..."],
  "min_members": 30,
  "max_members": 80
}
    • Response 201: Product object
            10.12.2 PATCH /admin/products/:id
    • Description: Update product details
            10.12.3 POST /admin/groups
    • Description: Create a new group campaign for a product
    • Request:
{
  "product_id": "uuid-product",
  "target_members": 50,
  "max_members": 80,
  "deadline": "2025-11-21T18:00:00Z"
}
            10.12.4 POST /admin/groups/:id/close
    • Description: Force close group (e.g., early success or operational reason)

            10.12.5 GET /admin/reports/overview
    • Description: Returns high-level KPIs (GMV, revenue, active groups, completion rate, etc.)

    11. NOTIFICATIONS SYSTEM
This section defines how BuyForce communicates with users across push notifications, email, and in-app notifications.
The goal is to provide clear, timely and trustworthy updates about group status, payments, and key events - without spamming or overwhelming the user.
    11 
        11.1 Objectives
            11.1.1 Drive engagement & conversions
    • Remind users to join promising groups.
    • Nudge users when groups are close to completion.
            11.1.2 Maintain trust & transparency
    • Inform users about payments (pre-auth, charge, refund).
    • Clearly communicate group success or failure.
            11.1.3 Enhance user experience
    • Provide relevant, non-intrusive, and timely messages.
    • Allow users to control their notification preferences.
        11.2 Notification Channels
BuyForce uses three primary channels:
            11.2.1 Push Notifications (Mobile)
    • Delivered via Firebase Cloud Messaging (FCM).
    • Primary channel for time-sensitive alerts (e.g., “12 hours left”).
            11.2.2 Email Notifications
    • Delivered via SendGrid.
    • Used for transactional events and official confirmations (e.g., receipts, refunds, password reset).
            11.2.3 In-App Notifications
    • Stored in the notifications table and displayed in the Notifications tab.
    • Provide a persistent history of important events.
Each event type defines which channel(s) should be used.










        11.3 Notification Types & Triggers
            11.3.1 Core Event Types
Type	Description	Channels
GROUP_JOINED	User successfully joined a group	      Push, Email, In-App

	GROUP_70	Group reached 70% of target
Push, In-App	GROUP_95	Group reached 95% of target
Push, In-App	GROUP_T_MINUS_12H	12 hours left before group deadline
Push, In-App	GROUP_SUCCESS	Group reached target, charging starts/finished
		Push, Email, In-App
GROUP_FAILED	Group did not reach target, refund processed	Push, Email, In-App

PAYMENT_FAILED	Pre-auth or charge failed	
	Push, Email, In-App	REFUND_PROCESSED
Refund completed	Email, In-App	PROMO_DEAL
Optional marketing/promo notification	      Push, In-App (opt-in)	
		(Marketing / promo notifications will respect user opt-in/out preferences.)
        11.4 Event-to-Notification Rules	            11.4.1 On Join Success (GROUP_JOINED)	    • Trigger:
        ◦ After successful pre-auth (1₪) and confirmed group membership.	    • Content Logic:	        ◦ Title: “You joined a group!”
        ◦ Body: “You’ve joined the group for [Product Name]. You’ll be charged only if the group reaches its goal.”	        ◦ Payload:	{
  "type": "GROUP_JOINED",	  "group_id": "uuid-group",	  "product_id": "uuid-product"
}		
		
		




            11.4.2 Group Progress 70% (GROUP_70)
    • Trigger:
        ◦ When group’s joined_count / target_members reaches or passes 0.70.
    • Target Audience:
        ◦ Joined users (so they know progress).
        ◦ Optionally users with product in Wishlist (MVP+ or later).
    • Message Examples:
        ◦ Push Title: “Your group is 70% full!”
        ◦ Push Body: “Only a few more people needed to unlock the deal for [Product Name].”
    • Rate Limit
        ◦ Notify each user only once per group at 70%.
            11.4.3 Group Progress 95% (GROUP_95)
    • Trigger:
        ◦ Ratio reaches or passes 0.95.
    • Message Examples:
        ◦ “Almost there! Your group for [Product Name] is 95% full.”
    • Rate Limit
        ◦ One notification per user per group at 95%.
            11.4.4 Time-Based Reminder: T-12 Hours (GROUP_T_MINUS_12H)
    • Trigger:
        ◦ 12 hours before group deadline, for groups still in OPEN or REACHED_TARGET status.
    • Target Audience:
        ◦ Joined users (to tell them current status).
        ◦ Potentially wishlist users (future).
    • Message Examples:
        ◦ “12 hours left for the group on [Product Name]. Current progress: 82%.”
            11.4.5 Group Success (GROUP_SUCCESS)
    • Trigger:
        ◦ Group transitions to LOCKED and then CHARGED status.
    • Sub-events:
        ◦ GROUP_LOCKED (optional internal)
        ◦ GROUP_SUCCESS (visible to user)
        ◦ PAYMENT_CHARGED (payment-level transparency)
    • Message Examples:
        ◦ Email Subject: “Your group succeeded! Payment processed for [Product Name].”
        ◦ Body includes:
            ▪ Product name + image
            ▪ Final charged amount
            ▪ Expected shipment/fulfillment info (manual MVP)
            11.4.6 Group Failure (GROUP_FAILED)
    • Trigger:
        ◦ Group status changes to FAILED (deadline reached + target not met).
    • Actions:
        ◦ Trigger refund job for all users with PREAUTH_HELD.
        ◦ Send notification once refund is confirmed (can be combined with REFUND_PROCESSED).
    • Message Example:
        ◦ “The group for [Product Name] did not complete. Your 1₪  has been refunded.”
            11.4.7 Payment Failure (PAYMENT_FAILED)
    • Trigger:
        ◦ Pre-auth failed OR full charge failed after retries.
    • Message Example:
        ◦ “We couldn’t process your payment for [Product Name]. Please update your payment method.”
    • CTA:
        ◦ Deep-link to Profile -> Payment Methods OR group page.
            11.4.8 Refund Processed (REFUND_PROCESSED)
    • Trigger:
        ◦ After a successful refund from Tranzilla.
    • Email Content:
        ◦ Amount, product, group info, estimated bank processing time.
            11.4.9 Promotional Deals (PROMO_DEAL)
    • Trigger:
        ◦ Manual / scheduled marketing campaigns (future/controlled).
    • Rules:
        ◦ Only for users who opted-in for marketing.
        ◦ Frequency limits (e.g., max 2 per week).
        ◦ Must not mix system-transactional and marketing in the same message.












        11.5 Notification Payload Model (Backend)
All notifications stored in DB in a unified format (example notifications table row):
{
  "id": "uuid-notification",
  "user_id": "uuid-user",
  "type": "GROUP_70",
  "title": "Your group is 70% full!",
  "body": "Only a few more people needed for Sony 65\" 4K TV.",
  "payload": {
    "group_id": "uuid-group",
    "product_id": "uuid-product",
    "progress_pct": 0.7
  },
  "channel": "push",
  "status": "PENDING",
  "created_at": "2025-11-18T12:34:56Z",
  "sent_at": null
}
    • Fields:
        ◦ type - canonical event type.
        ◦ title, body - localized, human-friendly text.
        ◦ payload - JSON with deep-linking metadata.
        ◦ channel - 'push' | 'email' | 'in_app'.
        ◦ status - 'PENDING' | 'SENT' | 'FAILED' | 'READ' (if in-app).

        11.6 In-App Notifications UX
    • All in-app notifications appear in the Notifications screen.
    • Notifications sorted by created_at DESC.
    • Each item:
        ◦ Icon based on type (success, warning, info).
        ◦ Title + short description.
        ◦ Tapping redirects to relevant screen (group, product, profile).
    • Optionally, unread dot indicator on bottom-nav icon.










        11.7 User Preferences & Opt-Out Controls
Users can manage notification preferences in Profile -> Settings.
            11.7.1 Toggles (MVP)
    • Push notifications: ON/OFF
    • Email notifications: ON/OFF
    • Marketing / Promotional: ON/OFF
            11.7.2 Non-Overridable Transactional Messages
Some messages are mandatory for trust reasons (even if marketing is off), e.g:
    • Group success (charge receipt) - email.
    • Group failure (refund) - email.
    • Critical payment errors.
                    These are purely transactional, not promotional.
        11.8 Technical Architecture
            11.8.1 NotificationModule (Backend)
Responsibilities:
    • Receive event signals from other modules (Group, Payment, Wishlist, etc.).
    • Generate notification records in DB.
    • Enqueue jobs for sending via correct channel(s).
    • Handle retries and failure logs.
    • Respect user settings and rate limits.
            11.8.2 Event Flow (Example: Group 70%)
    8 
    9 
    10 
    11 
        11.1 
        11.2 
        11.3 
        11.4 
        11.5 
        11.6 
        11.7 
        11.8 
            11.8.1 
            11.8.2 
                11.8.2.1 GroupModule updates group progress.
                11.8.2.2 It publishes an internal event: GROUP_PROGRESS_UPDATED.
                11.8.2.3 If threshold crossed (e.g., 70%), NotificationModule:
                    11.8.2.3.1 Selects all group_memberships for that group.
                    11.8.2.3.2 Filters out users who opted out of push.
                    11.8.2.3.3 Creates notifications rows with status=PENDING.
                    11.8.2.3.4 Pushes jobs to Redis queue to send.
                11.8.2.4 Workers process jobs:
                    11.8.2.4.1 For channel=push: call FCM.
                    11.8.2.4.2 For channel=email: call SendGrid.
                    11.8.2.4.3 On success: status=SENT + sent_at timestamp.
                    11.8.2.4.4 On failure: set FAILED and optionally retry based on error.







        11.9 Rate Limiting & Anti-Spam Rules
To avoid overwhelming users:
            11.9.1 Per Event Type per Group/User
    • GROUP_70 - max 1 notification per group per user.
    • GROUP_95 - max 1 per group per user.
    • GROUP_T_MINUS_12H - max 1 per group per user.
            11.9.2 Per Day per User
    • Hard cap, e.g., max 10 notifications/day/user across all types.
    • Promo (PROMO_DEAL) events limited (e.g., 2 per week).
            11.9.3 Backoff for Failures
    • For push/email errors (temporary): exponential backoff and max retry count.
        11.10 Error Handling & Retries
If sending fails:
    • For push:
        ◦ Retry up to 3 times with exponential backoff (e.g., 1m, 5m, 30m).
        ◦ If token invalid -> mark user’s push token as invalid and stop.
    • For email:
        ◦ Retry for transient SendGrid errors (5xx).
        ◦ No retry for 4xx (invalid email).
    • For each failure, log:
        ◦ error_code, error_message in notifications row.
        11.11 Observability & Analytics
            11.11.1 Metrics
    • notifications_sent_total, by type and channel.
    • Delivery success rate per channel.
    • Open/click-through rate (future, for push & email).
    • Time-to-deliver for critical events (success, failure).
            11.11.2 Logging
    • Log important transitions:
        ◦ Event received -> notification created -> send attempt -> result.
    • Correlate with group_id and user_id for debugging.











        11.12 QA & Test Scenarios (Notifications)
Key scenarios to test:
            11.12.1 Join group -> user receives GROUP_JOINED push + email.
            11.12.2 Group hits 70% and 95% -> progress notifications delivered only once.
            11.12.3 Group fails->refundtriggered-> GROUP_FAILED  + REFUND_PROCESSED messages.
            11.12.4 Payment failure -> user gets PAYMENT_FAILED and can recover.
            11.12.5 User turns off all push notifications -> no further pushes (but still receives critical emails).
            11.12.6 High-load scenario (many groups closing) -> queues behave correctly and within latency SLO.





























    12. ANALYTICS & KPIs
Analytics & KPIs are essential for measuring BuyForce’s performance, understanding user behavior, optimizing conversions, identifying operational issues and demonstrating traction to investors.
This section defines the measurement framework for both the MVP and post-MVP scaling phases.
    8 
    9 
    10 
    11 
    12 
    12 
        12.1 Objectives of Analytics
            12.1.1 Measure platform performance across user acquisition, conversion, group success, and revenue.
            12.1.2 Monitor system health (payments, participation, group lifecycle).
            12.1.3 Identify bottlenecks in the user journey (join funnel, search funnel, wishlist funnel).
            12.1.4 Optimize engagement via notifications, homepage experiments, and category performance.
            12.1.5 Support growth decisions (which categories to expand, pricing sensitivity, supplier performance).
            12.1.6 Prepare data foundation for future Agentic automation (trend detection, dynamic pricing, supplier negotiation).
        12.2 Key Metrics (KPIs)
            12.2.1 Core Business KPIs
These KPIs define BuyForce’s business success.
KPI	Description	Why It Matters
GMV (Gross Merchadise Volume)	Total value of all successfully charged group purchases	Primary business scale metric
Take Rate / Revenue	Commission earned per successful group	Measures profitability
Group Completion Rate	% of groups that reach their target and convert	Health of business model
Average Discount Level	Avg. difference between group price vs retail price	Drives user motivation
Active Users (DAU/WAU/MAU)	Users who perform any meaningful action	Engagement & retention indicator
User Acquisition Cost (UAC)	Paid marketing cost per new activated user	Budget & growth planning
Retention (Day 1 / Week 1 / Month 1)	How many users return after joining	How many users return after joining



            12.2.2 Conversion Funnel KPIs
KPIs used to understand conversion at each step.
Step	KPI	Formula
Homepage -> Product	Product View Rate	Product Views / Homepage Sessions
Product -> Join	Join Conversion Rate	Group Join Events / Product Views
Pre-auth->Join Success	Payment Pre-auth Success Rate	Pre-auth Success / Pre-auth Attempts
Join -> Group Success	Member Contribution Rate	Joined Count / Target Members
Group Success->Charge	Charge Success Rate	Charge Success / Charge Attempts
            12.2.3 Operational KPIs
For monitoring the system health.
KPI	Description
Payment Failure Rate	Failed payment attempts (pre-auth or charge)
Refund Issuance Time	Avg. time for refund processing
Notification Delivery Rate	Success rate of push/email sends
Server Error Rate	5xx errors per 1,000 requests
Latency (P95, P99)	Response time of critical endpoints

            12.2.4 User Engagement KPIs
KPI	Description
Wishlist Add Rate	Wishlist Add Events / Product Views
Return-to-Group Rate	Users who revisit joined groups
Search Engagement	Search events per active user
Notification Open Rate	Push + in-app reaction metrics
            12.2.5 Category Performance KPIs
Used to identify top and weak verticals.
KPI	Description
Category GMV	Revenue by category
Category Conversion Rate	Joins / Views per category
Group Completion by Category	% of groups succeeding by category










        12.3 Event Tracking Model
    • BuyForce uses an event-based analytics model.
    • Each event includes:
        ◦ event_name
        ◦ user_id (nullable for public events)
        ◦ timestamp
        ◦ metadata (JSON)
        ◦ device / platform info
            12.3.1 Core Product Events
    • Homepage:
        ◦ homepage_view
        ◦ section_scroll (near-goal / trending)
        ◦ category_shortcut_click
    • Categories:
        ◦ category_view
        ◦ sort_change
        ◦ filter_apply (post-MVP)
    • Product Page:
        ◦ product_view
        ◦ image_swipe
        ◦ wishlist_add
        ◦ wishlist_remove
    • Group:
        ◦ group_view
        ◦ join_click
        ◦ join_success
        ◦ preauth_failed
        ◦ group_success_seen
        ◦ group_failed_seen
    • Search:
        ◦ search_open
        ◦ search_query
        ◦ search_result_click
    • Notifications:
        ◦ notification_received
        ◦ notification_open
        ◦ notification_dismiss
    • Profile & Settings:
        ◦ profile_view
        ◦ settings_edit
        ◦ payment_method_add
        ◦ payment_method_fail

            12.3.2 Payment Events
    • payment_preauth_attempt
    • payment_preauth_success
    • payment_preauth_fail
    • payment_charge_attempt
    • payment_charge_success
    • payment_charge_fail
    • payment_refund_issued
            12.3.3 Wishlist Events
    • wishlist_add
    • wishlist_remove
    • wishlist_open
            12.3.4 My Groups Events
    • my_groups_view
    • group_details_open
    • group_progress_seen
        12.4 Funnel Definitions
            12.4.1 Join Funnel
homepage_view  
                    ◦ product_view  
                    ◦ join_click  
                    ◦ payment_preauth_attempt  
                    ◦ payment_preauth_success  
                    ◦ join_success  
                    ◦ group_success  
                    ◦ payment_charge_success
            12.4.2 Search Funnel
search_open  
                    ◦ search_query  
                    ◦ search_results  
                    ◦ product_click  
                    ◦ join_click  
                    ◦ join_success
            12.4.3 Wishlist Funnel
product_view  
                    ◦ wishlist_add  
                    ◦ wishlist_open  
                    ◦ wishlist_join_click  
                    ◦ join_success




        12.5 Visualization & Dashboards
The following dashboards should be created (Mixpanel or GA4, Looker, or Tableau):
            12.5.1 Product Funnel Dashboard
    • Views -> Joins -> Pre-auths -> Charges
    • By category and product
            12.5.2 Group Lifecycle Dashboard
    • Active Groups
    • Near Goal
    • Success
    • Failed
    • Average time to success
    • Average group size
            12.5.3 Payments Dashboard
    • Pre-auth success rate
    • Charge success rate
    • Refund counts
    • Failure reasons
            12.5.4 Engagement Dashboard
    • DAU / MAU
    • Session duration
    • Returning users
    • Wishlist interactions
            12.5.5 Cohort Retention Dashboard
    • Day 1 / Week 1 / Month 1 retention by cohort
    • Retention segmentation by category
        12.6 Data Infrastructure
MVP Tools:
    • Firebase Analytics -> user events
    • Mixpanel -> funnels + cohort tracking
    • PostgreSQL -> aggregated metrics (cron jobs)
Post-MVP:
    • BigQuery / Snowflake for large-scale analytics
    • ETL pipelines -> daily/hourly data refresh
    • Feature store for Agentic models (trend detection, dynamic pricing)








        12.7 KPI Targets (Suggested)
These values can be adjusted after first 3 months of real usage.
KPI	Target
Join Conversion Rate	4-7% of product views
Group Completion Rate	30-45% in early stages
Pre-auth Success Rate	>95%
Charge Success Rate	>92%
Refund Rate	<8%
Wishlist Add Rate	10-20%
DAU/MAU Ratio	20-30%
Notification Open Rate	15-30%

        12.8 Agentic Future KPIs (For Later Automation)
            12.8.1 Trend Detection KPIs
    • Category velocity
    • Emerging demand signals
    • Join acceleration curves
    • Cross-product correlation
            12.8.2 Supplier Performance KPIs
    • Delivery times
    • Prices vs market average
    • Bulk deal acceptance rate
            12.8.3 Dynamic Pricing KPIs
    • Price elasticity
    • Conversion impact of discount tiers
    • Optimal target size per category
        12.9 Summary
This analytics framework ensures BuyForce can:
    • Track product & group performance
    • Diagnose conversion issues
    • Prove product-market fit
    • Optimize the join funnel
    • Scale successfully
    • Build the foundation for future Agentic automation
    13. NON-FUNCTIONAL REQUIREMENTS
    14. QA & TESTING PLAN
    15. RISK ANALYSIS & MITIGATION
    16. POST-MVP ROADMAP
    17. DEVELOPMENT TIMELINE
